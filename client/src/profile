import React from "react";
import MovieTableItem from './MovieTableItem' // Not used here
import movies from '../data/imdb_top_1000.json' // Not used here

export function Profile({ useAuth }) {
  const { user } = useAuth();

  const handleExport = () => {
    const userData = {
      username: user.username,
      age: user.age,
      email: user.email,
    };
    const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(userData));
    const downloadAnchorNode = document.createElement('a');
    downloadAnchorNode.setAttribute("href", dataStr);
    downloadAnchorNode.setAttribute("download", "user_data.json");
    document.body.appendChild(downloadAnchorNode);
    downloadAnchorNode.click();
    downloadAnchorNode.remove();
  };

  return (
    <div className="profile">
      <h1>{user ? user.username : 'Guest'}</h1>
      <div>Username: {user?.username}</div>
      <div>Age: {user?.age}</div>
      <div>Email: {user?.email}</div>
      <button onClick={handleExport}>Export User Data</button>
    </div>
  );
}
